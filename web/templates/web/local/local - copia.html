{% extends 'web/base.html' %}
{% load staticfiles %}
{%block stylesheet %}
	<link rel="stylesheet" href="{% static 'css/estilosLocalDetalle.css' %}">
{% endblock stylesheet%}

{% block content %}
<div class="container-fluid" style="background-color:white;"> 
{% include "web/includes/menu.html" %}	
	<div class="row">
		<div class="col-md-4">
			<div id="imagen"><img src="{% static sitio.imagen %}" align="middle"/></div>
		</div>
		<div class="col-md-8"  style="text-align:center;">
			<h3>{{ sitio.nombreLocal }}</h3>
			<div id="contacto">
				<ul>
					<li>Teléfono: {{ sitio.telefono }}</li>
					<li>Email: {{ sitio.email }}</li>
					<li>Página web: {{ sitio.web }}</li>
				</ul>
			</div>
			<div id="direccion">Direccion: {{ sitio.direccion }}</div>
			<hr>
			<div>{{ sitio.descripcion }}</div>
			<!-- Trigger the modal with a button -->
<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Ver mapa</button>

<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">{{ sitio.nombreLocal }}</h4>
      </div>
      <div class="modal-body">
        <div id="googleMap" style="width:100%;height:400px;"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>
		</div>
	</div>

	
</div>
{% block scriptBody %}
	<script>
		function map() {
			var geocoder = new google.maps.Geocoder();
            var direccion = $("#direccion").text();		
            geocoder.geocode({ 'address': direccion }, function (results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    latitude = results[0].geometry.location.lat();
                    longitude = results[0].geometry.location.lng();
					var myCenter = new google.maps.LatLng(latitude, longitude);
					var mapCanvas = document.getElementById("googleMap");
					var mapOptions = {center: myCenter, zoom: 15};
					var map = new google.maps.Map(mapCanvas, mapOptions);
					var marker = new google.maps.Marker({position:myCenter});
					marker.setMap(map);
					
                } else {
                    alert("Request failed.")					
                }
            });
						
		}
</script>

 <script async defer
    src="http://maps.google.com/maps/api/js?key=AIzaSyCEawu2d20iAePS6ImLYqVvFiQ_u47Q1ys&callback=map">
    </script>

{% endblock scriptBody %}
{% endblock content %}